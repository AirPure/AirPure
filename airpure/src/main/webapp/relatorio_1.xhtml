<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:hf="http://highfaces.org">
    <style>
        .ui-fieldset {
            backgrond: #FFF;
            color: #4f4f4f;
            background-color: #EEE!Important;
            border: none;

        }
        .ui-panelgrid {
            align-content: center;
        }
        .noHeader.ui-datatable table thead tr {
            display: none;
        }
        .noColor.ui-datascroller .ui-datascroller-item {
            background-color: #FFFFFF!Important;
        }
        .color.ui-datascroller .ui-datascroller-item {
            background-color: #FFFFFF!Important;
        }
        @page {
            size: A4;
            margin: 0;
        }

    </style>
    <SCRIPT type="text/javascript">
        function imprime() {
            window.print();
        }
        function myFunction() {
            document.getElementById("teste2").style.display = "none";
            window.print();
            document.getElementById("teste2").style.display = "inline";
        }
        function redireciona() {
            window.history.back();
        }
    </SCRIPT>
    <link rel="shortcut icon" type="image/x-icon" href="#{resource['images/logo1.png']}"/>
    <h:head>
        <title>AirPure - Relatório</title>
    </h:head>
    <h:body onload="#{chartView.setnAmostra(1)}"></h:body>
    <h:body style="background-color:#FFFFFF!important" id="geralzao" onload="#{autenticacao.verificacao()}">

        <h:form>    
            <div id="teste2">
                <p></p>
                <p:menubar style="background: #EEEEEE">
                    <f:facet name="options">
                        <p:commandButton type="button" value="Voltar" icon="pi pi-home" onclick="redireciona()">
                        </p:commandButton>
                        <p:commandButton type="button" value="Imprimir" icon="pi pi-home" onclick="myFunction()">
                        </p:commandButton>
                    </f:facet>
                </p:menubar>
            </div>
        </h:form>
        <h:form>

            <p></p>
            <p:fieldset style="width:950px; margin: 0px auto;">
                <p:panelGrid columns="2" style="width:930px; text-align: center;">
                    <p:graphicImage library="images" value="#{FacesContext.getCurrentInstance().getExternalContext()}/resources/images/logo2.png" width="150"/> 
                    <h1>RELATÓRIO - QUALIDADE DO AR</h1>
                </p:panelGrid>
                <p:outputPanel style="background: #EEEEEE; width:930px; height: 35px;"><h3>I - INFORMAÇÕES DO AMBIENTE</h3></p:outputPanel>

                <p:dataScroller value="#{requestdata3.returnAmbienteById()}" var="groups" rendered="true">
                    <h:panelGrid columns="2" style="width:100%">
                        <p:outputPanel>
                            <h:panelGrid columns="2" cellpadding="5"> 
                                <h:outputText value="Sala:" />
                                <h:outputText value="#{groups.sala}" style="font-weight: bold"/>

                                <h:outputText value="Prédio" />
                                <h:outputText value="#{groups.predio}" style="font-weight: bold"/>

                                <h:outputText value="Câmpus:" />
                                <h:outputText value="#{groups.local}" style="font-weight: bold"/>

                                <h:outputText value="Capacidade máxima:" />
                                <h:outputText value="#{groups.capacidadeMaxima} ocupantes" style="font-weight: bold"/>

                                <h:outputText value="Dimensão do ambiente:" />
                                <h:outputText value="#{groups.dimensao} m²" style="font-weight: bold"/>

                                <h:outputText value="Equipamento Instalado:" />
                                <h:outputText value="#{groups.equipamentos}" style="font-weight: bold"/>

                                <h:outputText value="Nº de Controle do Equipamento:" />
                                <h:outputText value="#{groups.n_Controle}" style="font-weight: bold"/>

                                <h:outputText value="Nº de Patrimônio do Equipamento" />
                                <h:outputText value="#{groups.n_Patrimonio}" style="font-weight: bold"/>


                            </h:panelGrid>
                        </p:outputPanel>
                    </h:panelGrid>
                </p:dataScroller>
                <p:outputPanel style="background: #EEEEEE; width:930px; height: 35px;"><h3>II - MANUTENÇÕES DOS APARELHOS DE AR CONDICIONADO</h3></p:outputPanel>
                <p:dataTable value="#{requestdata3.retornaManutencoes()}" var="item" paginator="false" rows="15" >
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Data Execução"/>
                        </f:facet>
                        <h:outputText value="#{item.data_execucao}" style="font-weight: bold"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Executor"/>
                        </f:facet>
                        <h:outputText value="#{item.executor}" style="font-weight: bold"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Tipo"/>
                        </f:facet>
                        <h:outputText value="#{item.tipo}" style="font-weight: bold"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="HVAC"/>
                        </f:facet>
                        <h:outputText value="#{item.proxima_execucao}" style="font-weight: bold"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Serviços"/>
                        </f:facet>
                        <h:outputText value="#{item.servicos}" style="font-weight: bold"/>
                    </p:column>
                </p:dataTable>

                <p:outputPanel style="background: #EEEEEE; width:930px; height: 35px;"><h3>III - DADOS DA QUALIDADE DO AR - #{requestdata3.time()}</h3></p:outputPanel>




                <p:dataTable value="#{requestdata3.returnStatistics()}" var="item" paginator="false" rows="15" >
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Parâmetro"/>
                        </f:facet>
                        <h:outputText value="#{item.parametro}" style="font-weight: bold"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Máximo"/>
                        </f:facet>
                        <h:outputText value="#{item.co2Max}" style="font-weight: bold"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Mínimo"/>
                        </f:facet>
                        <h:outputText value="#{item.co2Min}" style="font-weight: bold"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Média"/>
                        </f:facet>
                        <h:outputText value="#{item.co2Media}" style="font-weight: bold"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Desvio Padrão"/>
                        </f:facet>
                        <h:outputText value="#{item.co2DesvPad}" style="font-weight: bold"/>
                    </p:column>
                </p:dataTable>

                <h:panelGrid columns="2">
                    <p:outputPanel>
                        <h:panelGrid columns="2" cellpadding="5"> 
                            <h:outputText value="Resultado: " />
                            <h:outputText value="#{requestdata3.returnAvgIAQCO2()}" style="font-weight: bold; font-size: 21px;"/>

                        </h:panelGrid>
                    </p:outputPanel>
                </h:panelGrid>


                <p:outputPanel style="background: #EEEEEE; width:930px; height: 35px;"><h3>IV - VARIAÇÕES GRÁFICAS - #{requestdata3.time()}</h3></p:outputPanel>

                <p:outputPanel style="width:100%;">
                    <hf:chart type="line" value="#{chartView3.registro1}" var="point"
                              point="#{point.y_value}" tickLabel="#{point.x_value}" title="Variação de CO2">
                        <hf:chartAxis position="s" title="Valores" type="datetime" tickAngle="-45"
                                      gridLineColor="#FFFF00" style="font-weight: bold; display: none;"/>
                    </hf:chart> 
                </p:outputPanel>
                <p:outputPanel style="width:100%;">
                    <hf:chart type="line" value="#{chartView3.registro2}" var="point"
                              point="#{point.y_value}" tickLabel="#{point.x_value}" title="Variação de eCO2">
                        <hf:chartAxis position="s" title="Valores" type="datetime" tickAngle="-45"
                                      gridLineColor="#FFFF00" style="font-weight: bold; display: none;"/>
                    </hf:chart> 
                </p:outputPanel>
                <p:outputPanel style="width:100%;">
                    <hf:chart type="line" value="#{chartView3.registro3}" var="point"
                              point="#{point.y_value}" tickLabel="#{point.x_value}" title="Variação de Temperatura">
                        <hf:chartAxis position="s" title="Valores" type="datetime" tickAngle="-45"
                                      gridLineColor="#FFFF00" style="font-weight: bold; display: none;"/>
                    </hf:chart> 
                </p:outputPanel>
                <p:outputPanel style="width:100%;">
                    <hf:chart type="line" value="#{chartView3.registro4}" var="point"
                              point="#{point.y_value}" tickLabel="#{point.x_value}" title="Variação de Umidade">
                        <hf:chartAxis position="s" title="Valores" type="datetime" tickAngle="-45"
                                      gridLineColor="#FFFF00" style="font-weight: bold; display: none;"/>
                    </hf:chart> 
                </p:outputPanel>
                <p:outputPanel style="width:100%;">
                    <hf:chart type="line" value="#{chartView3.registro5}" var="point"
                              point="#{point.y_value}" tickLabel="#{point.x_value}" title="Variação de dB">
                        <hf:chartAxis position="s" title="Valores" type="datetime" tickAngle="-45"
                                      gridLineColor="#FFFF00" style="font-weight: bold; display: none;"/>
                    </hf:chart> 
                </p:outputPanel>
                <p:outputPanel style="width:100%;">
                    <hf:chart type="line" value="#{chartView3.registro6}" var="point"
                              point="#{point.y_value}" tickLabel="#{point.x_value}" title="Variação de Lux">
                        <hf:chartAxis position="s" title="Valores" type="datetime" tickAngle="-45"
                                      gridLineColor="#FFFF00" style="font-weight: bold; display: none;"/>
                    </hf:chart> 
                </p:outputPanel>

                <p:outputPanel style="width:100%;">
                    <hf:chart type="line" value="#{chartView3.registro7}" var="point"
                              point="#{point.y_value}" tickLabel="#{point.x_value}" title="Variação de TVOC">
                        <hf:chartAxis position="s" title="Valores" type="datetime" tickAngle="-45"
                                      gridLineColor="#FFFF00" style="font-weight: bold; display: none;"/>
                    </hf:chart> 
                </p:outputPanel>

                <div style="text-align:center; ">
                    <p:outputLabel value="Powered by AirPure" style="font-size: 10px;"/>  
                </div>


            </p:fieldset>
            <p></p>
        </h:form>
    </h:body>
</html>